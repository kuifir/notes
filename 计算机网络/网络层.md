# 一、概述

## 导读

本章开始先介绍计算机网络在信息时代的作用。接着对互联网进行了概述，包括互联网基础结构发展的三个阶段，以及在今后的发展趋势。然后，讨论了互联网组成的边缘部分和核心部分。在简单介绍了计算机网络在我国的发展以及计算机网络的类别后，讨论了计算机网络的性能指标。最后，论述了整个课程都用到的重要概念-计算机网络的体系结构。

## 重要内容

- 互联网边缘部分和核心部分的作用，其中包含分组交换的概念
- 计算机网络的性能指标
- 计算机网络分层次的体系结构，包含协议和服务的概念。这部分内容比较抽象。在没有了解具体的计算机网络之前，很难完全掌握这些很抽象的概念。但这些抽象的概念又能够知道后续的学习，因此也必须从这些概念学起。建议读者在学习到后续章节时，经常在再复习一下本章的基本概念。这对掌握好整个计算机网络的概念是有益处的。

## 本章重要概念



## 1.1 计算机在信息时代的作用



## 1.2互联网的概述

### 1.2.1 网络的网络

计算机网络：有若干节点和连接这些节点的链路组成。

互连网：网络之前可以通过路由器连接起来，就构成了一个覆盖风范围更大的计算机网络。这样的网络称为互连网。因此互连网是`网络的网络`

` 网络把许多计算机连接在一起，而互联网则把许多网络通过路由器连接在一起。与网络相连的计算机常称为主机`

### 1.2.2 互联网基础结构发展的三个阶段

- 第一阶段：从单个网络ARPANET向互连网发展的过程

` internet（互连网） 是一个通用名词，它泛指由多个计算机网络互连而成的计算机网络。` 这些网络之间的通信协议（通信规则）可以任意选择，不一定非要使用 TCP/IP 协议。

` Internet(互联网，或因特网)则是一个专用名词，它指当前全球最大的、开放的、有众多网络互相连接而成的特定互联网，它采用TCP/IP 协议族作为通信的规则，且前身是美国的ARPANET`

- 第二阶段的特点是建成了` 三级结构的互联网`。

1985年，美国国家科学基金会NSF就围绕六个大型计算机中心建设计算机网络，即国家科学基金网NSFNET。他是一个三级计算机网络，分为` 主干网、地区网和校园网（或企业网）`。

- 第三阶段的特点是逐渐形成了`多层次ISP结构的互联网`。

互联网服务提供者`ISP`(Internet Service Provider)

在许多情况下，`ISP`就是一个进行商业活动的公司，因此`ISP`又常译为` 互联网服务提供商`，例如,中国电信、中国联通和中国移动等公司都是我国最有名的`ISP`

### 1.2.3 互联网的标准化工作

## 1.3 互联网的组成

互联网的拓扑结构虽然非常复杂，并且在地理上覆盖了全球，但从其工作方式上看，可以划分为以下两大块：

- **边缘部分** ：由所有连接在互联网上的主机组成。这部分使用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。
- **核心部分** ：由大量网络和连接这些网络的路由器组成。这部分是**为边缘部分提供服务的（提供连通性和交换）**

### 1.3.1 互联网的边缘部分

处在互联网边缘的部分就是连接在互联网上的所有主机。这些主机又称为**端系统**（end system）。

在网络边缘的端系统之间的通信方式通常可划分为两大类：客户-服务器方式）(C/S方式)和对等方式（P2P方式）。

### 1.3.2 互联网的核心部分

网络核心部分是互联网中最复杂的部分，因为网络中的核心部分要向网络边缘中的大量主机提供连通性，是边缘部分中的任何一台主机都能够向其他主机通信。

在网络核心部分其特殊作用的是**路由器**（router）,它是一种专用计算机（但不叫做主机）。路由器是实现**分组交换**（packet switching）的关键构件，其任务是**转发收到的分组**，这是网络核心部分最重要的功能。

**分组交换的主要特点** 

分组交换采用**存储转发**技术。通常我们把要发送的整块数据称为一个**报文**（message）。再发送报文之前，先把较长的报文划分称为一个个更小的等长数据段。在每个数据段前面，加上一些由必要的控制信息组成的**首部**后，就构成了一个**分组**（packet）。分组又称为**”包“**，而分组的首部也可称为”**包头**“，分组是在互联网中传送的数据单元。分组中的首部是非常重要的，正是由于分组的首部包含了诸如目的地址和源地址等重要控制信息，没一个分组才能在互联网中独立地选择传输路径，并被正确地交付到分组传输的终点。

位于网络边缘的主机和位于网络核心部分地路由器都是计算机，但他们的作用却很不一样。**主机是为用户进行信息处理的**，并且可以和其他主机通过网络交换信息。**路由器则是用来转发分组的，即进行分组交换的。**

## 1.4 计算机在我国的发展

## 1.5 计算机网络的类别

### 1.5.1 计算机网络的定义

计算机网络的精确定义并未统一。

关于计算机网络较好的定义是这样的[**PETE11**]：计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。

### 1.5.2 几种不同类别的计算机网络

- **按照网络的作用范围进行分类**
  - **广域网WAN** (Wide Area Network)
  - **城域网MAN**(Metropolitan Area Network)
  - **局域网LAN**(Local Area Network)
  - **个人区域网PAN**(Personal Area  Network) 
- **2.按照网络的使用者进行分类**
  - **公用网**（public network）
  - **专用网**（private netwoek）

## 1.6 计算机网络的性能

### 1.6.1 计算机网络的性能指标

- **1.速率**
- **2.带宽**
- **3.吞吐量**
- **4.时延**
- **5.时延带宽积**
- **6.往返时间RTT**
- **7.利用率**

### 1.6.2 计算机网络的非性能特征

- **1.费用**
- **2.质量**
- **3.标准化**
- **4.可靠性**
- **5.可扩展性和可升级性**
- **6.易于管理和维护**

## 1.7 计算机网络体系结构

### 1.7.1 计算机网络体系结构的形成

国际标准化组织ISO提出了一个试图使计算机在世界范围内互连成网的标准框架，即著名的**开放系统互连基本参考模型OSI/RM** (Open System Interconnection Reference Model),简称为OSI.

### 1.7.2 协议与划分层次

- **为进行网络中的数据交换而建立的规则、标准或约定**称为**网络协议（network protocol）**
- 网络协议的三要素：
  - **（1）语法** ，即数据与控制信息的结构或格式；
  - **（2）格式**，即需要发出何种控制信息，完成何种动作以及做出何种响应；
  - **（3）同步**，即事件实现顺序的详细说明

- 分层的好处：

  - **（1） 各层之间是独立的**
  - **（2） 灵活性好**
  - **（3） 结构上可分割开**
  - **（4）易于实现和维护**
  - **（5）能促进标准化工作**

  缺点：有些功能回重复出现，因而产生了额外开销

- 通常各层要完成的功能主要有以下一些（可以只包括一种，也可以包括多种）：

  - **（1）差错控制**
  - **（2）流量控制**
  - **（3）分段和重装**
  - **（4）分用和复用**
  - **（5）连接建立和释放**

### 1.7.3 具有五层协议的体系结构

**`OSI`** 的七层协议体系结构概念清楚，理论也较完成，但它既复杂又不实用。

**`TCP/IP`** 是一个四层的体系结构，他包含应用层、运输层、网际层和网络接口层

不过从本质上讲，**`TCP/IP`**只有最上面三层，因为最下面的网络接口层并没有什么具体的内容，因此在学习计算机网络的原理时往往采取折中的办法，采用一种只有五层的体系结构。

![计算机网络体系结构](.\img\计算机网络体系结构.webp)

各层的作用

- **（1）应用层** (application layer)

  应用层是体系结构的最高层。应用层的任务是**通过应用进程间的交互来完成特定网络应用**。应用层协议定义的是**应用进程间通信和交互的规则**。这里的**进程**就是指主机中**正在运行的程序**。对于不同的网络应用需要有不同的应用层协议。在互联网中应用层协议很多，如域名系统**`DNS`**,支持万维网应用的**`HTTP`**协议，支持电子邮件的**`SMTP`**协议，等等。我们把应用层交互的数据单元称为**报文（message）**。

- **（2）运输层**(transport layer)

  运输层的任务就是负责向**两台主机中进程之间的通信**提供**通用的数据传输**服务。

  由于一台主句可同时运行多个进程，因此运输层有复用和分用的功能。复用就是多个应用层进程可同时使用下面运输层的服务，分用和复用相反，是运输层把收到的信息分别交付上面应用层中的相应进程。

  运输层主要使用一下两种协议：

  - **传输控制协议 TCP(Transmission Control Protocol)** --提供面向连接的、可靠的数据传输服务，其数据传输的单位是**报文段**（segment）。
  - **用户数据报协议 UDP（User Datagram Protocol）**--提供无连接的、**尽最大努力**（best-effort）的数据传输服务（不保证数据传输的可靠性），其数据传输的单位是**用户数据报**。

- **（3）网络层**(network layer)

  网络层负责为分组交换网上的不同**主机**提供通信服务。在发送数据时，网络层会把运输层产生的报文段或用户数据报封装成**分组**或**包**进行传送。在TCP/IP 体系中，由于网络层使用IP协议。因此分组也叫做**IP 数据报**，或简称为**数据报**。

  不要将运输层的”用户数据报 UDP“和网络层的”IP数据报“弄混。此外**无论在哪一层传送的数据单元，都可笼统地用”分组“来表示**。

  网络层的另一个任务就是要选择合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。

  互联网是由大量的**异构**（heterogeneous）网络通过**路由器**（router）相互连接起来的。互联网使用的网络层协议是无连接的**网际层**或**IP层**。

- **（4）数据链路层**(data link layer)
  在两个相邻节点之间传送数据时，数据链路层将网络层交下来的IP数据报**组装成帧**（framing）,在两个相邻节点间的链路层上传送**帧**（frame），每一帧包括数据和必要的**控制信息**（如同步信息、地址信息、差错控制等）。

- **（5）物理层**（physical layer）

  在物理层上所传数据的单位是**比特**。

数据在各层之间的传递过程:

![数据在各层之间的传递过程](.\img\数据在各层之间的传递过程.webp)

### 1.7.4 实体、协议、服务和服务访问点

当研究开放系统中的信息交换时，往往使用**实体**（entity）这一较为抽象的名词表示**任何可发送或接收信息的硬件或软件进程**。

**协议是控制两个对等实体（或多个实体）进行通信的规则的集合**。

**在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务。要实现本层协议，还需要下面一层提供的服务**。

协议和服务在概念上是很不一样的：

- 首先协议的实现保证了能够像上一层提供服务。使用本层服务的实体只能看见服务而无法看见下面的协议，也就是说下面的协议对上面的实体是透明的。
- 其次，**协议**是水平的，即协议是控制对等实体之间通信的规则，但**服务是”垂直的“，即服务是由下层向上层通过层间接口提供的**。另外，并非在一个层内完成的全部功能都称为服务，只有那些能够被高一层实体”看得见“的功能才称之为”服务“。上层使用下层提供的服务必须通过与下层交换一些命令，这些命令在OSI中成为**服务原语**。

在同一系统中相邻两层中的实体进行交互（即交换信息）的地方，通常称为**服务访问点SAP**(Service Access Point)。

OSI 参考模型把对等层次之间传送的数据单位称为该层的**协议数据单元 PDU** (Protocol Data Unit)。

OSI 把层与层之间交换的数据的单位称为**服务数据单元SDU**(Service Data Unit)，它可以与PDU不一样。例如，可以是多个SDU合成为一个PDU，也可以是一个SDU划分为几个PDU。

### 1.7.5 TCP/IP 的体系结构

![TCP/IP体系机构表示方法](.\img\体系结构表示方法.webp)





## 三、数据链路层



# 四、网络层

## 4.1网络层两种服务

1. 计算机领域，网络层应该怎样向传输层提供怎样的服务曾引起争论，一种是``“面向连接”``，一种是``无连接``，争论的实质就是：在计算机通信中，可靠交付应当由谁来负责？是``网络``还是``端系统``
2. 两种服务

- 面向连接：借助于电信网（电话服务）的成功经验，让网络负责可靠交付。计算机网络也应模仿打电话所使用的面向连接的通信方式。当两台计算机进行通信时，应该先建立连接（但在分组交换中是建立一条虚拟电路VC（Virtual Circuit））,以预留双方通信所需要的一切网络资源。然后双方就沿着已建立的虚电路发送分组。这样的分组的首部不需要填完整的目的主机地址，而只需要填写这条虚电路的编号（一个不大的整数），因而减少了分组的开销。



